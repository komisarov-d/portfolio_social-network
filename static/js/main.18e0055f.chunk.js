(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{106:function(e,t,n){e.exports=n.p+"static/media/User_avatar.5172ccf5.png"},108:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__u9bra"}},137:function(e,t,n){e.exports={paginator:"Paginator_paginator__1D_-d",pageNumber:"Paginator_pageNumber__2J7Qm",selectedPage:"Paginator_selectedPage__1uTeB"}},158:function(e,t,n){e.exports={header:"Header_header__2yJoX",logo:"Header_logo__1QKBi"}},225:function(e,t,n){e.exports={navbar:"Navbar_navbar__xxSgx"}},231:function(e,t,n){e.exports={footer:"Footer_footer__WgV_A"}},234:function(e,t,n){e.exports={usersPage:"Users_usersPage__yz6ee",user:"Users_user__QVyjB",avatar:"Users_avatar__2OnjH"}},272:function(e,t,n){e.exports=n(473)},277:function(e,t,n){},278:function(e,t,n){},418:function(e,t,n){},473:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),c=n.n(l);n(277),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,u,i=n(121),s=n(122),m=n(134),f=n(135),d=(n(278),n(158)),p=n.n(d),E=n(20),g=n.n(E),h=n(43),b=n(29),v=n(222),O=n.n(v).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1e91d2c9-02cb-42ec-9f13-e2205e00b2f8"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(o||(o={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(u||(u={}));var S=n(72),w=function(){return O.get("auth/me").then((function(e){return e.data}))},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},y=function(){return O.delete("auth/login")},_=function(){return O.get("security/get-captcha-url").then((function(e){return e.data}))},P=function(e,t,n,a){return{type:"INIT/SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:a}}},k=function(e){return{type:"AUTH/GET_CAPTCHA_URL",payload:{captchaUrl:e}}},T=function(){return function(){var e=Object(h.a)(g.a.mark((function e(t){var n,a,r,l,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(n=e.sent).resultCode===o.Success&&(a=n.data,r=a.id,l=a.email,c=a.login,t(P(r,l,c,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=function(){return function(){var e=Object(h.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:n=e.sent,a=n.url,t(k(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I={userId:null,login:null,email:null,isAuth:!1,captchaUrl:null},C=n(11),x=n(93),A=n(59),N=n(172),R=n(224),F=n.n(R),L=n(44),D=Object(C.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:0===e.sent.data.resultCode&&t(P(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return r.a.createElement("header",{className:p.a.header},r.a.createElement(x.a,null,r.a.createElement(A.a,{span:12},r.a.createElement("img",{className:p.a.logo,src:"https://i.ya-webdesign.com/images/w3c-svg-scalable-vector-8.png",alt:"logo"})),r.a.createElement(A.a,{offset:9,span:3},e.isAuth?r.a.createElement("div",null,r.a.createElement(N.a,{onClick:e.logout,danger:!0},"Logout",r.a.createElement(F.a,null)),r.a.createElement("div",null,e.login)):r.a.createElement(L.b,{to:"/login"},"Login"))))})),M=n(50),G=n(478),H=n(225),z=n.n(H),q=n(481),J=n(482),V=n(483),W=n(484),B=n(485),Y=function(){var e=Object(a.useState)(!0),t=Object(M.a)(e,2),n=t[0],l=t[1];return r.a.createElement("div",{className:z.a.navbar,style:{width:256}},r.a.createElement(N.a,{type:"primary",onClick:n?function(){l(!1)}:function(){l(!0)},style:{marginBottom:16}},r.a.createElement(n?q.a:J.a)),r.a.createElement(G.a,{defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline",theme:"dark",inlineCollapsed:n},r.a.createElement(G.a.Item,{key:"1",icon:r.a.createElement(V.a,null)},r.a.createElement(L.b,{to:"/profile"},"Profile")),r.a.createElement(G.a.Item,{key:"2",icon:r.a.createElement(W.a,null)},r.a.createElement(L.b,{to:"/dialogs"},"Dialog")),r.a.createElement(G.a.Item,{key:"3",icon:r.a.createElement(B.a,null)},r.a.createElement(L.b,{to:"/users"},"Users"))))},K=n(231),X=n.n(K),Q=function(){return r.a.createElement("footer",{className:X.a.footer},"Footer")},Z=n(30),$=n(219),ee=n(110),te=n(76),ne=n.n(te),ae=n(218),re=function(e){var t=e.meta,n=t.touched,a=t.error,l=e.children,c=n&&a;return r.a.createElement("div",{className:ne.a.formControl+" "+(c?ne.a.error:"")},r.a.createElement("div",null,l),r.a.createElement("div",null,c&&r.a.createElement("span",null,a)))},le=function(e){var t=e.input,n=(e.meta,Object(ee.a)(e,["input","meta"]));return r.a.createElement(re,e,r.a.createElement("textarea",Object.assign({},t,n)))},ce=function(e){var t=e.input,n=(e.meta,Object(ee.a)(e,["input","meta"]));return r.a.createElement(re,e," ",r.a.createElement("input",Object.assign({},t,n)))};function oe(e,t,n,a){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return r.a.createElement("div",null,r.a.createElement(ae.a,Object.assign({placeholder:e,name:t,validate:n,component:a},l)),c)}var ue,ie=function(e){if(!e)return"field is required"},se=function(e){return e.auth.captchaUrl},me=function(e){return e.auth.isAuth},fe=(ue=30,function(e){if(e.length>ue)return"Max length is ".concat(ue," symbols")}),de=Object($.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaUrl;return r.a.createElement("form",{onSubmit:t},oe("Email","email",[ie,fe],ce),oe("Password","password",[ie,fe],ce,{type:"password"}),oe(void 0,"rememberMe",[],ce,{type:"checkbox"},"Remember me"),a&&r.a.createElement("img",{src:a,alt:"captchaUrl"}),a&&oe(void 0,"captcha",[ie],ce),n&&r.a.createElement("div",{className:ne.a.requestError},n),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),pe=function(){var e=Object(C.d)(se),t=Object(C.d)(me),n=Object(C.c)();if(t)return r.a.createElement(Z.a,{to:"/profile"});return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(de,{captchaUrl:e,onSubmit:function(e){var t,a,r,l;n((t=e.email,a=e.password,r=e.rememberMe,l=e.captcha,function(){var e=Object(h.a)(g.a.mark((function e(n){var c,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t,a,r,l);case 2:(c=e.sent).resultCode===o.Success?n(T()):(c.resultCode===u.CaptchaIsRequired&&n(U()),i=c.messages.length>0?c.messages[0]:"Some error",n(Object(S.a)("login",{_error:i})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}}))},Ee=(n(418),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),ge=n(24),he=n(91),be=function(e){return O.get("profile/"+e).then((function(e){return e.data}))},ve=function(e){return O.get("profile/status/"+e).then((function(e){return e.data}))},Oe=function(e){return O.put("profile/status",{status:e}).then((function(e){return e.data}))},Se=function(e){var t=new FormData;return t.append("image",e),O.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},we=function(e){return O.put("profile",e).then((function(e){return e.data}))},je={posts:[{id:1,title:"first"},{id:2,title:"second"},{id:3,title:"hello"},{id:4,title:"bye"}],profile:null,status:""},ye=function(e){return{type:"POST/ADD_POST",newPostText:e}},_e=function(e){return{type:"USER/SET_USER_PROFILE",profile:e}},Pe=function(e){return{type:"USER/SET_STATUS",payload:e}},ke=function(e){return{type:"USER/UPDATE_PHOTO",payload:e}},Te=function(e){return function(){var t=Object(h.a)(g.a.mark((function t(n){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be(e);case 2:a=t.sent,n(_e(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ue={messages:[{id:1,message:"Hello"},{id:2,message:"How are you?"},{id:3,message:"Hey"}],dialogs:[{id:1,name:"Dmitriy"},{id:2,name:"Kate"},{id:3,name:"Ira"},{id:4,name:"Boris"}]},Ie=function(e){return{type:"DIALOGS/SEND_MESSAGE",newMessageBody:e}},Ce=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(b.a)({},e,{},a):e}))},xe={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return O.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===a?"":"&friend=".concat(a))).then((function(e){return e.data}))},followRequest:function(e){return O.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return O.delete("follow/".concat(e)).then((function(e){return e.data}))}},Ae={users:[],totalUsersCount:0,pageSize:12,currentPage:1,isFetching:!1,followingInProgress:[],filter:{term:"",friend:null}},Ne=function(e){return{type:"USERS/FOLLOW",userId:e}},Re=function(e){return{type:"USERS/UNFOLLOW",userId:e}},Fe=function(e){return{type:"USERS/SET_USERS",usersPage:e}},Le=function(e){return{type:"USERS/SET_CURRENT_PAGE",currentPage:e}},De=function(e){return{type:"USERS/SET_FILTER",payload:e}},Me=function(e){return{type:"USERS/SET_TOTAL_COUNT",count:e}},Ge=function(e){return{type:"USERS/TOGGLE_IS_FETCHING",isFetching:e}},He=function(e,t){return{type:"USERS/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},ze=function(e,t,n){return function(){var a=Object(h.a)(g.a.mark((function a(r,l){var c;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r(Ge(!0)),r(Le(e)),r(De(n)),a.next=5,xe.getUsers(e,t,n.term,n.friend);case 5:c=a.sent,r(Ge(!1)),r(Fe(c.items)),r(Me(c.totalCount));case 9:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},qe=function(){var e=Object(h.a)(g.a.mark((function e(t,n,a,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(He(!0,n)),e.next=3,a(n);case 3:0===e.sent.resultCode&&t(r(n)),t(He(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Je={initialized:!1},Ve=function(){return{type:"APP/INITIALIZATION"}},We=n(221),Be=n(233),Ye=Object(ge.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST/ADD_POST":var n={id:Date.now(),title:t.newPostText};return Object(b.a)({},e,{posts:[].concat(Object(he.a)(e.posts),[n])});case"USER/SET_USER_PROFILE":return Object(b.a)({},e,{profile:t.profile});case"USER/SET_STATUS":return Object(b.a)({},e,{status:t.payload});case"USER/UPDATE_PHOTO":return Object(b.a)({},e,{profile:Object(b.a)({},e.profile,{photos:t.payload})});default:return e}},dialogPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DIALOGS/SEND_MESSAGE":var n=t.newMessageBody;return Object(b.a)({},e,{messages:[].concat(Object(he.a)(e.messages),[{id:Date.now(),message:n}])});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT/SET_USER_DATA":case"AUTH/GET_CAPTCHA_URL":return Object(b.a)({},e,{},t.payload);default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/FOLLOW":return Object(b.a)({},e,{users:Ce(e.users,t.userId,"id",{followed:!0})});case"USERS/UNFOLLOW":return Object(b.a)({},e,{users:Ce(e.users,t.userId,"id",{followed:!1})});case"USERS/SET_USERS":return Object(b.a)({},e,{users:t.usersPage});case"USERS/SET_CURRENT_PAGE":return Object(b.a)({},e,{currentPage:t.currentPage});case"USERS/SET_FILTER":return Object(b.a)({},e,{filter:t.payload});case"USERS/SET_TOTAL_COUNT":return Object(b.a)({},e,{totalUsersCount:t.count});case"USERS/TOGGLE_IS_FETCHING":return Object(b.a)({},e,{isFetching:t.isFetching});case"USERS/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(b.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(he.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/INITIALIZATION":return Object(b.a)({},e,{initialized:!0});default:return e}},form:We.a}),Ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.d,Xe=Object(ge.e)(Ye,Ke(Object(ge.a)(Be.a))),Qe=n(234),Ze=n.n(Qe),$e=n(123),et=n(137),tt=n.n(et),nt=n(2),at=n.n(nt),rt=function(e){for(var t=e.totalItemsCount,n=e.pageSize,l=e.currentPage,c=e.onPageChanged,o=void 0===c?function(e){return e}:c,u=e.portionSize,i=void 0===u?10:u,s=Math.ceil(t/n),m=[],f=1;f<=s;f++)m.push(f);var d=Math.ceil(s/i),p=Object(a.useState)(1),E=Object(M.a)(p,2),g=E[0],h=E[1],b=(g-1)*i+1,v=g*i;return r.a.createElement("div",{className:tt.a.paginator},g>1&&r.a.createElement("button",{onClick:function(){h(g-1)}},"PREV"),m.filter((function(e){return e>=b&&e<=v})).map((function(e){return r.a.createElement("span",{className:at()(Object($e.a)({},tt.a.selectedPage,l===e),tt.a.pageNumber),key:e,onClick:function(){o(e)}},e)})),d>g&&r.a.createElement("button",{onClick:function(){h(g+1)}},"Next"))},lt=n(106),ct=n.n(lt),ot=n(477),ut=n(480),it=n(237),st=n.n(it),mt=function(e){var t=e.user,n=e.followingInProgress,a=e.follow,l=e.unfollow;return r.a.createElement("div",null,r.a.createElement(L.b,{to:"/profile/"+t.id},r.a.createElement(ot.a,{style:{width:250},cover:r.a.createElement("img",{alt:"example",src:null!==t.photos.large?t.photos.large:ct.a})},r.a.createElement(st.a,{avatar:r.a.createElement(ut.a,{src:null!==t.photos.small?t.photos.small:ct.a}),title:t.name,description:t.status}),r.a.createElement("hr",null))),t.followed?r.a.createElement(N.a,{danger:!0,disabled:n.some((function(e){return e===t.id})),onClick:function(){l(t.id)}},"Unfollow"):r.a.createElement(N.a,{disabled:n.some((function(e){return e===t.id})),onClick:function(){a(t.id)}},"Follow"))},ft=n(67),dt=function(e){return{}},pt=r.a.memo((function(e){var t=e.onFilterChanged;return r.a.createElement(ft.c,{initialValues:{term:"",friend:"null"},validate:dt,onSubmit:function(e,n){var a=n.setSubmitting,r={term:e.term,friend:"null"===e.friend?null:"true"===e.friend};t(r),a(!1)}},(function(e){var t=e.isSubmitting;return r.a.createElement(ft.b,null,r.a.createElement(ft.a,{type:"text",name:"term"}),r.a.createElement(ft.a,{name:"friend",as:"select"},r.a.createElement("option",{value:"null"},"ALL"),r.a.createElement("option",{value:"true"},"Only followed"),r.a.createElement("option",{value:"false"},"Only unfollowed")),r.a.createElement("button",{type:"submit",disabled:t},"Submit"))}))})),Et=function(e){return e.usersPage.users},gt=function(e){return e.usersPage.pageSize},ht=function(e){return e.usersPage.totalUsersCount},bt=function(e){return e.usersPage.currentPage},vt=function(e){return e.usersPage.isFetching},Ot=function(e){return e.usersPage.followingInProgress},St=function(e){return e.usersPage.filter},wt=function(e){var t=Object(C.d)(ht),n=Object(C.d)(Et),l=Object(C.d)(gt),c=Object(C.d)(bt),o=Object(C.d)(Ot),u=Object(C.d)(St),i=Object(C.c)();Object(a.useEffect)((function(){i(ze(c,l,u))}),[i,c,u,l]);var s=function(e){i(function(e){return function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe(n,e,xe.followRequest.bind(xe),Ne);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},m=function(e){i(function(e){return function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe(n,e,xe.unfollow.bind(xe),Re);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},f=n.map((function(e){return r.a.createElement(mt,{key:e.id,user:e,followingInProgress:o,follow:s,unfollow:m})}));return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,"Search Panel"),r.a.createElement(pt,{onFilterChanged:function(e){i(ze(1,l,e))}})),r.a.createElement("div",null,r.a.createElement(rt,{onPageChanged:function(e){i(ze(e,l,u))},currentPage:c,totalItemsCount:t,pageSize:l})),r.a.createElement("div",{className:Ze.a.usersPage},f))},jt=function(e){var t=Object(C.d)(vt);return r.a.createElement("div",null,t&&r.a.createElement(Ee,null),r.a.createElement(wt,null))},yt=n(108),_t=n.n(yt),Pt=function(e){var t="/dialogs/"+e.id;return r.a.createElement("div",{className:_t.a.dialog+" "+_t.a.active},r.a.createElement(L.b,{to:t},e.name))},kt=function(e){return r.a.createElement("div",null,e.message)},Tt=function(e){return e.dialogPage.messages},Ut=function(e){return e.dialogPage.dialogs},It=n(479),Ct=function(e){var t=Object(ft.d)({initialValues:{newMessage:""},onSubmit:function(t){e.addNewMessage(t.newMessage)}});return r.a.createElement("form",{onSubmit:t.handleSubmit},r.a.createElement("label",{htmlFor:"newMessage"},"New Message"),r.a.createElement(It.a,{id:"newMessage",name:"newMessage",type:"text",onChange:t.handleChange,value:t.values.newMessage}),r.a.createElement("button",null,"Send"))},xt=function(e){var t=Object(C.d)(Ut),n=Object(C.d)(Tt),a=Object(C.c)(),l=t.map((function(e){return r.a.createElement(Pt,{key:e.id,id:e.id,name:e.name})})),c=n.map((function(e){return r.a.createElement(kt,{key:e.id,message:e.message})}));return r.a.createElement("div",{className:_t.a.dialogs},r.a.createElement(x.a,null,r.a.createElement(A.a,{span:7},l),r.a.createElement(A.a,{span:14},c)),r.a.createElement(x.a,null,r.a.createElement(A.a,{span:12},r.a.createElement(Ct,{addNewMessage:function(e){a(Ie(e))}}))))},At=n(75),Nt=n.n(At),Rt=function(e){return e.profilePage.posts},Ft=function(e){return e.profilePage.profile},Lt=function(e){return e.profilePage.status},Dt=function(e){var t=Object(C.d)(Lt),n=Object(C.c)(),l=Object(a.useState)(!1),c=Object(M.a)(l,2),o=c[0],u=c[1],i=Object(a.useState)(t),s=Object(M.a)(i,2),m=s[0],f=s[1];Object(a.useEffect)((function(){f(t)}),[t]);return r.a.createElement("div",null,!o&&r.a.createElement("div",null,r.a.createElement("b",null,"Status: ")," ",r.a.createElement("span",{onDoubleClick:function(){u(!0)}},t||"-------")),o&&r.a.createElement("div",null,r.a.createElement("input",{onChange:function(e){f(e.currentTarget.value)},autoFocus:!0,onBlur:function(){u(!1),n(function(e){return function(){var t=Object(h.a)(g.a.mark((function t(n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe(e);case 2:0===t.sent.resultCode&&n(Pe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(m))},value:m})))},Mt=Object($.a)({form:"Profile-data-form"})((function(e){var t=e.profile,n=e.handleSubmit,a=e.error;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement(N.a,{onClick:n},"Save changes")),r.a.createElement("div",null,a&&r.a.createElement("div",{className:ne.a.requestError},a)),r.a.createElement("div",null,r.a.createElement("b",null,"Full name"),": ",oe("Full name","fullName",[],ce)),r.a.createElement("div",null,r.a.createElement("b",null,"lookingForAJob"),":",oe("","lookingForAJob",[],ce,{type:"checkbox"})),r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills"),": ",oe("Add you skills","lookingForAJobDescription",[],le)),r.a.createElement("div",null,r.a.createElement("b",null,"About me:")," ",oe("About me","aboutMe",[],le)),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts:")," ",Object.keys(t.contacts).map((function(e){return r.a.createElement("div",{key:e,className:ne.a.contact},r.a.createElement("b",null,e),oe(e,"contacts."+e,[],ce))}))))})),Gt=function(e){var t=e.contactTitle,n=e.contactValue;return r.a.createElement("div",{className:Nt.a.contact},r.a.createElement("b",null,t),": ",n)},Ht=function(e){var t=e.profile,n=e.isOwner,a=e.goToEditMode;return r.a.createElement("div",null,n&&r.a.createElement("div",null,r.a.createElement(N.a,{onClick:a},"Edit profile")),r.a.createElement("div",null,r.a.createElement("b",null,"Full name"),":",t.fullName),r.a.createElement("div",null,r.a.createElement("b",null,"lookingForAJob"),": ",t.lookingForAJob?"Yes":"No"),t.lookingForAJob&&r.a.createElement("div",null,r.a.createElement("b",null,"My professional skills"),": ",t.lookingForAJobDescription),r.a.createElement("div",null,r.a.createElement("b",null,"About me:")," ",t.aboutMe),r.a.createElement("div",null,r.a.createElement("b",null,"Contacts:")," ",Object.keys(t.contacts).map((function(e){return r.a.createElement(Gt,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))))},zt=function(e){var t=e.isOwner,n=Object(a.useState)(!1),l=Object(M.a)(n,2),c=l[0],o=l[1],u=Object(C.c)(),i=Object(C.d)(Ft);if(!i)return r.a.createElement(Ee,null);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{alt:"profileAva",className:Nt.a.avatar,src:i.photos.large||ct.a}),r.a.createElement("div",null," ",t&&r.a.createElement("input",{title:"Update user photo",type:"file",onChange:function(e){var t,n;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&u((n=e.target.files[0],function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(n);case 2:0===(a=e.sent).resultCode&&t(ke(a.data.photos));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})),c?r.a.createElement(Mt,{profile:i,initialValues:i,onSubmit:function(e){u(function(e){return function(){var t=Object(h.a)(g.a.mark((function t(n,a){var r,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().auth.userId,t.next=3,we(e);case 3:if(0!==(l=t.sent).resultCode){t.next=12;break}if(null===r){t.next=9;break}n(Te(r)),t.next=10;break;case 9:throw new Error("UserId can't be null");case 10:t.next=14;break;case 12:return n(Object(S.a)("edit-profile",{_error:l.messages[0]})),t.abrupt("return",Promise.reject(l.messages[0]));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(e)),o(!1)}}):r.a.createElement(Ht,{profile:i,goToEditMode:function(){o(!0)},isOwner:t})),r.a.createElement(Dt,null))},qt=function(e){var t=Object(C.c)(),n=Object(ft.d)({initialValues:{newPostText:""},onSubmit:function(e){t(ye(e.newPostText))}});return a.createElement("form",{onSubmit:n.handleSubmit},a.createElement("label",{htmlFor:"newPostText"},"New Post"),a.createElement(It.a,{style:{width:"300px"},id:"newPostText",name:"newPostText",type:"text",onChange:n.handleChange,value:n.values.newPostText}),a.createElement("button",null,"Create Post"))},Jt=n(133),Vt=n(476),Wt=n(171),Bt=n.n(Wt),Yt=n(486),Kt=n(487),Xt=n(488),Qt=n(489),Zt=function(e){var t=e.postTitle,n=e.initial,l=void 0===n?null:n,c=Object(a.useState)(0),o=Object(M.a)(c,2),u=o[0],i=o[1],s=Object(a.useState)(0),m=Object(M.a)(s,2),f=m[0],d=m[1],p=Object(a.useState)(l),E=Object(M.a)(p,2),g=E[0],h=E[1],b=[r.a.createElement(Jt.a,{key:"comment-basic-like",title:"Like"},r.a.createElement("span",{onClick:function(){i(1),d(0),h("liked")}},Object(a.createElement)("liked"===g?Yt.a:Kt.a),r.a.createElement("span",{className:"comment-action"},u))),r.a.createElement(Jt.a,{key:"comment-basic-dislike",title:"Dislike"},r.a.createElement("span",{onClick:function(){i(0),d(1),h("disliked")}},r.a.createElement("disliked"===g?Xt.a:Qt.a),r.a.createElement("span",{className:"comment-action"},f))),r.a.createElement("span",{key:"comment-basic-reply-to"},"Reply to")];return r.a.createElement(Vt.a,{actions:b,author:r.a.createElement("a",{href:"post"},"Han Solo"),avatar:r.a.createElement(ut.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png",alt:"Han Solo"}),content:r.a.createElement("p",null,t),datetime:r.a.createElement(Jt.a,{title:Bt()().format("YYYY-MM-DD HH:mm:ss")},r.a.createElement("span",null,Bt()().fromNow()))})},$t=a.memo((function(e){var t=Object(C.d)(Rt).reverse().map((function(e){return a.createElement(Zt,{initial:null,key:e.id,postTitle:e.title})}));return a.createElement("div",null,a.createElement("div",null,a.createElement(qt,null)),a.createElement("h3",null,"My Posts"),a.createElement("div",{className:Nt.a.posts},t))})),en=function(e){return r.a.createElement("div",{className:Nt.a.content},r.a.createElement(zt,{isOwner:e.isOwner}),r.a.createElement($t,null))},tn=function(e){return{isAuth:e.auth.isAuth}};var nn=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),e?(this.props.getUserProfile(e),this.props.getStatus(e)):console.error("ID should exists in URI params or in state ('authorizedUserId')")}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return r.a.createElement(en,{isOwner:!this.props.match.params.userId})}}]),n}(r.a.Component),an=Object(ge.d)(Object(C.b)((function(e){return{authorizedUserId:e.auth.userId}}),{getUserProfile:Te,getStatus:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(n){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve(e);case 2:a=t.sent,n(Pe(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Z.g,(function(e){return Object(C.b)(tn,{})((function(t){var n=t.isAuth,a=Object(ee.a)(t,["isAuth"]);return n?r.a.createElement(e,a):r.a.createElement(Z.a,{to:"/login"})}))}))(nn),rn=function(e){Object(f.a)(n,e);var t=Object(m.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(e){alert(" error "+e)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app"},r.a.createElement(x.a,null,r.a.createElement(A.a,{span:24},r.a.createElement(D,null))),r.a.createElement(x.a,null,r.a.createElement(A.a,{span:3},r.a.createElement(Y,null)),r.a.createElement(A.a,{className:"content",offset:1,span:18},r.a.createElement(Z.d,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement(Ee,null))},r.a.createElement(Z.a,{from:"/",to:"/profile"}),r.a.createElement(Z.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(an,null)}}),r.a.createElement(Z.b,{path:"/dialogs",render:function(){return r.a.createElement(xt,null)}}),r.a.createElement(Z.b,{path:"/users",render:function(){return r.a.createElement(jt,null)}}),r.a.createElement(Z.b,{path:"/login",render:function(){return r.a.createElement(pe,null)}}))))),r.a.createElement(x.a,null,r.a.createElement(A.a,{span:24},r.a.createElement(Q,null)))):r.a.createElement(Ee,null)}}]),n}(r.a.Component),ln=Object(ge.d)(Z.g,Object(C.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(T());Promise.all([t]).then((function(){e(Ve())}))}}}))(rn),cn=function(){return r.a.createElement(C.a,{store:Xe},r.a.createElement(L.a,null,r.a.createElement(ln,null)))};n(472);c.a.render(r.a.createElement(cn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,n){e.exports={content:"Profile_content__1yoS8",avatar:"Profile_avatar__2U7Mm",contact:"Profile_contact__11bhH",requestError:"Profile_requestError__1p0qE",posts:"Profile_posts__1DSGk"}},76:function(e,t,n){e.exports={formControl:"FormsControls_formControl__1CIgc",error:"FormsControls_error__2isJh",requestError:"FormsControls_requestError__O8HOF"}}},[[272,1,2]]]);
//# sourceMappingURL=main.18e0055f.chunk.js.map